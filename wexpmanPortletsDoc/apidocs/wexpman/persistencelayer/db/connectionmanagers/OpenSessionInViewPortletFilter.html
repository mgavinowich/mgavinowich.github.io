<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_11) on Thu Dec 12 13:22:41 ART 2013 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>OpenSessionInViewPortletFilter (Web Experiment Manager 1.0 API)</title>
<meta name="date" content="2013-12-12">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="OpenSessionInViewPortletFilter (Web Experiment Manager 1.0 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/OpenSessionInViewPortletFilter.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../wexpman/persistencelayer/db/connectionmanagers/OpenSessionInViewDb4oPortletFilter.html" title="class in wexpman.persistencelayer.db.connectionmanagers"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?wexpman/persistencelayer/db/connectionmanagers/OpenSessionInViewPortletFilter.html" target="_top">Frames</a></li>
<li><a href="OpenSessionInViewPortletFilter.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">wexpman.persistencelayer.db.connectionmanagers</div>
<h2 title="Class OpenSessionInViewPortletFilter" class="title">Class OpenSessionInViewPortletFilter</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>wexpman.persistencelayer.db.connectionmanagers.OpenSessionInViewPortletFilter</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>org.apache.portals.bridges.portletfilter.PortletFilter</dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../wexpman/persistencelayer/db/connectionmanagers/OpenSessionInViewDb4oPortletFilter.html" title="class in wexpman.persistencelayer.db.connectionmanagers">OpenSessionInViewDb4oPortletFilter</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="strong">OpenSessionInViewPortletFilter</span>
extends <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements org.apache.portals.bridges.portletfilter.PortletFilter</pre>
<div class="block">This class implements a filter which will open a database session when
 initiating the request and close it when the response has been generated. The
 session will be bound to the current thread. This filter constitutes an
 implementation of the open session in view pattern.
 
 Given that the portlet specification (JSR 168) does not support portlet
 filters, this filter relies on the Apache Portals Bridges Portlet Filter
 library, which needs to be included with the project as well as properly
 configured in the portlet.xml (descriptor) file.
 
 This class takes ideas from the OpenSessionInViewFilter class from Spring. It
 is designed to work with Spring and will use the session factory bean defined
 in Spring's context.
 
 Portlet filters implemented with the Apache Portlet Filter library
 distinguish a process action filtering stage and a render filtering stage. As
 defined by the portlet life cycle, it can be assured that a process action
 will always be followed by a render request. Therefore, the process action
 filtering stage will not attempt to close the session, rather keep it open
 for the later rendering stage.
 
 In the way filters are implemented by the library used, a given filter class
 will be instantiated only once per portlet, meaning that if two different
 users access the same portlet, the same filter instance will be used in both
 cases. This prevents from using member variables to keep state which depends
 on the user. It also bans using member variables to keep state which depends
 on the thread, because each user is serviced on a separate thread by the
 portal framework, therefore using a member variable would mean the same
 variable would be accessed by the different threads to update their
 thread-dependent information. For this reason, reference counts used by this
 portlet are stored in the PortletSession, in APPLICATION_SCOPE. Attributes
 stored under this scope are visible for all portlets only for a particular
 user (for practical purposes, this also means for a particular thread). These
 attributes survive between requests.
 
 This filter will guarantee at most 1 session per request, per user, per
 portlet is employed. For a particular thread (i.e. user), the first filtering
 stage will open a session, associate it with the current thread, and
 increment the reference count of the session by one. If no other instance of
 the OpenSessionInViewPortletFilter is executed, once back from executing the
 rest of the filters in the chain, the reference count will be decremented
 and, if 0 (as it would be in this case), the session will be closed and
 unbound from the current thread. It would be expected that filter execution
 for different portlets for the same user (same thread) should not overlap,
 i.e. all filters for portlet 1 would be processed, then all filters for
 portlet 2, and so on. In the event there was overlap, and the
 OpenSessionInViewPortletFilter for portlet 2 was executed when the
 OpenSessionInViewPortletFilter has not been fully processed for portlet 1
 yet, the reference count would come into play (since it is the same
 user/thread which can see the APPLICATION_SCOPE attribute) and the same
 session would be used for both portlet 1 and portlet 2, effectively being
 closed once the reference count is 0. This also applies if for some reason
 two instances of this filter were applied to the same portlet, in which case
 execution would indeed be overlapped (although there is no reason for
 applying this filter twice to the same portlet).
 
 If there is processing of an action, there will be a process action filtering
 stage for the portlet which is responding to the user action, plus as many
 render filtering stages as portlets are visible (as long as they use this
 filter). In this case, the session will be first opened in the process action
 filtering stage. Assuming no overlap in filter execution between portlets,
 the session will be closed in the render filtering stage for that same
 portlet.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Matias Alberto Gavinowich</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../wexpman/persistencelayer/db/connectionmanagers/OpenSessionInViewPortletFilter.html#OpenSessionInViewPortletFilter()">OpenSessionInViewPortletFilter</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected abstract void</code></td>
<td class="colLast"><code><strong><a href="../../../../wexpman/persistencelayer/db/connectionmanagers/OpenSessionInViewPortletFilter.html#beginUsingSession(javax.portlet.PortletRequest)">beginUsingSession</a></strong>(javax.portlet.PortletRequest&nbsp;request)</code>
<div class="block">Begins using the session.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../wexpman/persistencelayer/db/connectionmanagers/OpenSessionInViewPortletFilter.html#decSessionRefCount(javax.portlet.PortletRequest)">decSessionRefCount</a></strong>(javax.portlet.PortletRequest&nbsp;request)</code>
<div class="block">Decrements the session reference count
 
 This method is not responsible for checking if the reference count drops
 below 0.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../wexpman/persistencelayer/db/connectionmanagers/OpenSessionInViewPortletFilter.html#destroy()">destroy</a></strong>()</code>
<div class="block">Destroys the filter.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected abstract void</code></td>
<td class="colLast"><code><strong><a href="../../../../wexpman/persistencelayer/db/connectionmanagers/OpenSessionInViewPortletFilter.html#endUsingSession(javax.portlet.PortletRequest, boolean)">endUsingSession</a></strong>(javax.portlet.PortletRequest&nbsp;request,
               boolean&nbsp;keepSessionOpen)</code>
<div class="block">Ends using the database session.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected javax.portlet.PortletConfig</code></td>
<td class="colLast"><code><strong><a href="../../../../wexpman/persistencelayer/db/connectionmanagers/OpenSessionInViewPortletFilter.html#getPortletConfig()">getPortletConfig</a></strong>()</code>
<div class="block">Gets the <code>PortletConfig</code> for the portlet this filter is being
 applied to
 
 It is a protected methods so subclasses can use it if this filter is
 customized.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected javax.portlet.PortletContext</code></td>
<td class="colLast"><code><strong><a href="../../../../wexpman/persistencelayer/db/connectionmanagers/OpenSessionInViewPortletFilter.html#getPortletContext()">getPortletContext</a></strong>()</code>
<div class="block">Gets the portlet context for the portlet this filter is being applied to</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a></code></td>
<td class="colLast"><code><strong><a href="../../../../wexpman/persistencelayer/db/connectionmanagers/OpenSessionInViewPortletFilter.html#getSessionRefCount(javax.portlet.PortletRequest)">getSessionRefCount</a></strong>(javax.portlet.PortletRequest&nbsp;request)</code>
<div class="block">Gets the session reference count, using an APPLICATION_SCOPE attribute in
 the <code>PortletSession</code> named
 <a href="../../../../wexpman/persistencelayer/db/connectionmanagers/OpenSessionInViewPortletFilter.html#SESSION_REF_COUNT_ATTRIBUTE_NAME"><code>SESSION_REF_COUNT_ATTRIBUTE_NAME</code></a>
 
 It is a protected method so subclasses can use it if this filter is
 customized.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../wexpman/persistencelayer/db/connectionmanagers/OpenSessionInViewPortletFilter.html#incSessionRefCount(javax.portlet.PortletRequest)">incSessionRefCount</a></strong>(javax.portlet.PortletRequest&nbsp;request)</code>
<div class="block">Increments the session reference count</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../wexpman/persistencelayer/db/connectionmanagers/OpenSessionInViewPortletFilter.html#init(org.apache.portals.bridges.portletfilter.PortletFilterConfig)">init</a></strong>(org.apache.portals.bridges.portletfilter.PortletFilterConfig&nbsp;filterConfig)</code>
<div class="block">Initializes the filter.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../wexpman/persistencelayer/db/connectionmanagers/OpenSessionInViewPortletFilter.html#processActionFilter(javax.portlet.ActionRequest, javax.portlet.ActionResponse, org.apache.portals.bridges.portletfilter.PortletFilterChain)">processActionFilter</a></strong>(javax.portlet.ActionRequest&nbsp;request,
                   javax.portlet.ActionResponse&nbsp;response,
                   org.apache.portals.bridges.portletfilter.PortletFilterChain&nbsp;chain)</code>
<div class="block">Applies the filter at the process action stage.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../wexpman/persistencelayer/db/connectionmanagers/OpenSessionInViewPortletFilter.html#renderFilter(javax.portlet.RenderRequest, javax.portlet.RenderResponse, org.apache.portals.bridges.portletfilter.PortletFilterChain)">renderFilter</a></strong>(javax.portlet.RenderRequest&nbsp;request,
            javax.portlet.RenderResponse&nbsp;response,
            org.apache.portals.bridges.portletfilter.PortletFilterChain&nbsp;chain)</code>
<div class="block">Applies the filter at the render stage.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../wexpman/persistencelayer/db/connectionmanagers/OpenSessionInViewPortletFilter.html#setSessionRefCount(javax.portlet.PortletRequest, java.lang.Integer)">setSessionRefCount</a></strong>(javax.portlet.PortletRequest&nbsp;request,
                  <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&nbsp;newRefCount)</code>
<div class="block">Sets the session reference count</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="OpenSessionInViewPortletFilter()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>OpenSessionInViewPortletFilter</h4>
<pre>public&nbsp;OpenSessionInViewPortletFilter()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="init(org.apache.portals.bridges.portletfilter.PortletFilterConfig)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre>public&nbsp;void&nbsp;init(org.apache.portals.bridges.portletfilter.PortletFilterConfig&nbsp;filterConfig)
          throws javax.portlet.PortletException</pre>
<div class="block">Initializes the filter. Called by the portal framework when initializing
 the filter.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>init</code>&nbsp;in interface&nbsp;<code>org.apache.portals.bridges.portletfilter.PortletFilter</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>filterConfig</code> - a <code>PortletFilterConfig</code> object that contains
            initialization parameters, filter information and portlet
            information</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>javax.portlet.PortletException</code> - if the filter could not be initialized, this is defined by
             the PortletFilter interface but will actually never be thrown
             by this implementation, since there is no part of this method
             that throws such an exception.</dd><dt><span class="strong">See Also:</span></dt><dd><code>org.apache.portals.bridges.portletfilter.PortletFilter#init(org.apache
      .portals.bridges.portletfilter.PortletFilterConfig)</code></dd></dl>
</li>
</ul>
<a name="destroy()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>destroy</h4>
<pre>public&nbsp;void&nbsp;destroy()</pre>
<div class="block">Destroys the filter. Called by the portal framework when destroying the
 filter.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>destroy</code>&nbsp;in interface&nbsp;<code>org.apache.portals.bridges.portletfilter.PortletFilter</code></dd>
<dt><span class="strong">See Also:</span></dt><dd><code>PortletFilter.destroy()</code></dd></dl>
</li>
</ul>
<a name="processActionFilter(javax.portlet.ActionRequest, javax.portlet.ActionResponse, org.apache.portals.bridges.portletfilter.PortletFilterChain)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processActionFilter</h4>
<pre>public&nbsp;void&nbsp;processActionFilter(javax.portlet.ActionRequest&nbsp;request,
                       javax.portlet.ActionResponse&nbsp;response,
                       org.apache.portals.bridges.portletfilter.PortletFilterChain&nbsp;chain)
                         throws javax.portlet.PortletException,
                                <a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Applies the filter at the process action stage. Called by the portal
 framework each time there is an action request on a given portlet.
 
 This method will open a new database session and attach it to the
 current thread (most likely case) or get the already attached session if
 there was one (unlikely, since process action is the very first stage
 executed from a given user action).
 
 It will also increment the reference count on the session. Nevertheless,
 it would be expected that this is the only portlet processing an action
 and that the action processing for the portlet takes place before the
 rendering stage of any portlet (all this as defined by the portlet life
 cycle), therefore the most likely case is that when this method is
 finishing and decrements the reference count again, it will be back at 0.
 
 This method will decrement the reference count when it ends execution,
 but will keep the database session open and bound to the current thread
 even if the reference count is 0 - which is what will likely happen -
 since it is expected that there will be at least one rendering stage (at
 least the one for this same portlet) for the same user (i.e. thread).
 Alternatively, this method could have been implemented so as to close the
 session, but then more sessions would be used overall, thus the approach
 chosen minimizes the amount of necessary sessions.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>processActionFilter</code>&nbsp;in interface&nbsp;<code>org.apache.portals.bridges.portletfilter.PortletFilter</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>request</code> - the <code>ActionRequest</code></dd><dd><code>response</code> - the <code>ActionResponse</code></dd><dd><code>chain</code> - the <code>PortletFilterChain</code> instance that allows access to
            the chain of filters, in particular to invoke the next filter
            in the chain, as required by the filter invoking scheme</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>javax.portlet.PortletException</code> - if the filter could not be executed, this is defined by the
             PortletFilter interface and it could actually only be thrown
             if another filter down the chain throws it, since there is no
             part of this method that throws such an exception.</dd>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if there was a problem performing an I/O operation, this is
             defined by the PortletFilter interface and it could actually
             only be thrown if another filter down the chain throws it,
             since there is no part of this method that throws such an
             exception.</dd><dt><span class="strong">See Also:</span></dt><dd><code>(javax.portlet.ActionRequest, javax.portlet.ActionResponse,
      org.apache.portals.bridges.portletfilter.PortletFilterChain)</code></dd></dl>
</li>
</ul>
<a name="renderFilter(javax.portlet.RenderRequest, javax.portlet.RenderResponse, org.apache.portals.bridges.portletfilter.PortletFilterChain)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>renderFilter</h4>
<pre>public&nbsp;void&nbsp;renderFilter(javax.portlet.RenderRequest&nbsp;request,
                javax.portlet.RenderResponse&nbsp;response,
                org.apache.portals.bridges.portletfilter.PortletFilterChain&nbsp;chain)
                  throws javax.portlet.PortletException,
                         <a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Applies the filter at the render stage. Called by the portal framework
 each time there is a render request on a given portlet.
 
 This method will open a new database session and attach it to the
 current thread (most likely case) or get the already attached session if
 there was one (unlikely, since it would be expected that filter execution
 for different portlets for the same user - i.e. same thread - should not
 overlap, meaning all filters for portlet 1 would be processed, then all
 filters for portlet 2, and so on, so the reference count at the end of
 each portlet filtering would effectively be 0). In the event two
 instances of this filter are applied to the same portlet (though there is
 no reason to do so) or another filter is developed based on this
 implementation and the two of them are applied to the same portlet, the
 second filter executed would use the session already bound to the current
 thread.
 
 It will also increment the reference count on the session when it begins
 using it and decrement it when it's done. If the reference count becomes
 0 at this point (most likely), it will unbind the session from the
 current thread, and close it.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>renderFilter</code>&nbsp;in interface&nbsp;<code>org.apache.portals.bridges.portletfilter.PortletFilter</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>request</code> - the <code>RenderRequest</code></dd><dd><code>response</code> - the <code>RenderResponse</code></dd><dd><code>chain</code> - the <code>PortletFilterChain</code> instance that allows access to
            the chain of filters, in particular to invoke the next filter
            in the chain, as required by the filter invoking scheme</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>javax.portlet.PortletException</code> - if the filter could not be executed, this is defined by the
             PortletFilter interface and it could actually only be thrown
             if another filter down the chain throws it, since there is no
             part of this method that throws such an exception.</dd>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if there was a problem performing an I/O operation, this is
             defined by the PortletFilter interface and it could actually
             only be thrown if another filter down the chain throws it,
             since there is no part of this method that throws such an
             exception.</dd><dt><span class="strong">See Also:</span></dt><dd><code>org.apache.portals.bridges.portletfilter.PortletFilter#renderFilter(javax
      .portlet.RenderRequest, javax.portlet.RenderResponse,
      org.apache.portals.bridges.portletfilter.PortletFilterChain)</code></dd></dl>
</li>
</ul>
<a name="getPortletConfig()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPortletConfig</h4>
<pre>protected&nbsp;javax.portlet.PortletConfig&nbsp;getPortletConfig()</pre>
<div class="block">Gets the <code>PortletConfig</code> for the portlet this filter is being
 applied to
 
 It is a protected methods so subclasses can use it if this filter is
 customized.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the PortletConfig</dd></dl>
</li>
</ul>
<a name="beginUsingSession(javax.portlet.PortletRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>beginUsingSession</h4>
<pre>protected abstract&nbsp;void&nbsp;beginUsingSession(javax.portlet.PortletRequest&nbsp;request)</pre>
<div class="block">Begins using the session. It checks whether there is a session
 already bound to the current thread. If there is not, it uses the session
 factory to get a new session and binds it to the current thread. The
 reference count for the session is incremented by 1.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>request</code> - the <code>PortletRequest</code> for this filtering stage, it can be
            either an <code>ActionRequest</code> or a <code>RenderRequest</code>
            depending on whether this method is being called from a
            process action or a render filtering method.</dd></dl>
</li>
</ul>
<a name="endUsingSession(javax.portlet.PortletRequest, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>endUsingSession</h4>
<pre>protected abstract&nbsp;void&nbsp;endUsingSession(javax.portlet.PortletRequest&nbsp;request,
                   boolean&nbsp;keepSessionOpen)</pre>
<div class="block">Ends using the database session. The reference count for the session is
 decremented by 1. If it is specified that the session should be kept
 open, it will not be closed. Otherwise, it will be closed - and unbound
 from the current thread - if after decrementing the reference count
 becomes 0, meaning there is no one wanting to give this session further
 use.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>request</code> - the <code>PortletRequest</code> for this filtering stage, it can be
            either an <code>ActionRequest</code> or a <code>RenderRequest</code>
            depending on whether this method is being called from a
            process action or a render filtering method.</dd><dd><code>keepSessionOpen</code> - a boolean with a value of true if the session should be kept
            open regardless of the reference count, or false if it should
            be closed and unbound from the thread if the reference count
            becomes 0</dd></dl>
</li>
</ul>
<a name="getPortletContext()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPortletContext</h4>
<pre>protected final&nbsp;javax.portlet.PortletContext&nbsp;getPortletContext()</pre>
<div class="block">Gets the portlet context for the portlet this filter is being applied to</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the PortletContext</dd></dl>
</li>
</ul>
<a name="getSessionRefCount(javax.portlet.PortletRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSessionRefCount</h4>
<pre>protected&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&nbsp;getSessionRefCount(javax.portlet.PortletRequest&nbsp;request)</pre>
<div class="block">Gets the session reference count, using an APPLICATION_SCOPE attribute in
 the <code>PortletSession</code> named
 <a href="../../../../wexpman/persistencelayer/db/connectionmanagers/OpenSessionInViewPortletFilter.html#SESSION_REF_COUNT_ATTRIBUTE_NAME"><code>SESSION_REF_COUNT_ATTRIBUTE_NAME</code></a>
 
 It is a protected method so subclasses can use it if this filter is
 customized.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>request</code> - the <code>PortletRequest</code> for this filtering stage, it can be
            either an <code>ActionRequest</code> or a <code>RenderRequest</code>
            depending on whether this method is being called from a
            process action or a render filtering method.</dd>
<dt><span class="strong">Returns:</span></dt><dd>an Integer with the session reference count</dd></dl>
</li>
</ul>
<a name="incSessionRefCount(javax.portlet.PortletRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>incSessionRefCount</h4>
<pre>protected&nbsp;void&nbsp;incSessionRefCount(javax.portlet.PortletRequest&nbsp;request)</pre>
<div class="block">Increments the session reference count</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>request</code> - the <code>PortletRequest</code> for this filtering stage, it can be
            either an <code>ActionRequest</code> or a <code>RenderRequest</code>
            depending on whether this method is being called from a
            process action or a render filtering method.</dd></dl>
</li>
</ul>
<a name="decSessionRefCount(javax.portlet.PortletRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>decSessionRefCount</h4>
<pre>protected&nbsp;void&nbsp;decSessionRefCount(javax.portlet.PortletRequest&nbsp;request)</pre>
<div class="block">Decrements the session reference count
 
 This method is not responsible for checking if the reference count drops
 below 0.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>request</code> - the <code>PortletRequest</code> for this filtering stage, it can be
            either an <code>ActionRequest</code> or a <code>RenderRequest</code>
            depending on whether this method is being called from a
            process action or a render filtering method.</dd></dl>
</li>
</ul>
<a name="setSessionRefCount(javax.portlet.PortletRequest, java.lang.Integer)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>setSessionRefCount</h4>
<pre>protected&nbsp;void&nbsp;setSessionRefCount(javax.portlet.PortletRequest&nbsp;request,
                      <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&nbsp;newRefCount)</pre>
<div class="block">Sets the session reference count</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>request</code> - the <code>PortletRequest</code> for this filtering stage, it can be
            either an <code>ActionRequest</code> or a <code>RenderRequest</code>
            depending on whether this method is being called from a
            process action or a render filtering method.</dd><dd><code>newRefCount</code> - an Integer with the new session reference count to set</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/OpenSessionInViewPortletFilter.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../wexpman/persistencelayer/db/connectionmanagers/OpenSessionInViewDb4oPortletFilter.html" title="class in wexpman.persistencelayer.db.connectionmanagers"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?wexpman/persistencelayer/db/connectionmanagers/OpenSessionInViewPortletFilter.html" target="_top">Frames</a></li>
<li><a href="OpenSessionInViewPortletFilter.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2008&#x2013;2013 <a href="http://www.gophasin.com/wexpman">Matias Alberto Gavinowich</a>. All rights reserved.</small></p>
</body>
</html>
